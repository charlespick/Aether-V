version: 1
id: nic-create
name: "Network adapter creation"
description: "Schema for creating and attaching a new network adapter to an existing VM."
fields:
  - id: vm_id
    label: "VM ID"
    description: "Hyper-V ID of the virtual machine to attach the network adapter to."
    hint: "Example: 12345678-1234-1234-1234-123456789abc"
    type: string
    required: true
    validations:
      min_length: 36
      max_length: 36
  - id: network
    label: "Network"
    description: "Name of the network to connect the adapter to."
    hint: "Production"
    type: string
    required: true
  - id: adapter_name
    label: "Adapter name"
    description: "Optional name for the network adapter."
    hint: "Network Adapter 2"
    type: string
    required: false
  - id: guest_v4_ipaddr
    label: "IPv4 address"
    description: "Static IPv4 address to assign to the guest."
    hint: "192.0.2.50"
    type: ipv4
    required: false
  - id: guest_v4_cidrprefix
    label: "IPv4 prefix length"
    description: "CIDR prefix length that accompanies the static IPv4 address."
    hint: "24"
    type: integer
    required: false
    validations:
      minimum: 1
      maximum: 32
  - id: guest_v4_defaultgw
    label: "Default gateway"
    description: "Default IPv4 gateway for the guest."
    hint: "192.0.2.1"
    type: ipv4
    required: false
  - id: guest_v4_dns1
    label: "Primary DNS server"
    description: "Primary IPv4 DNS server for the guest."
    hint: "192.0.2.53"
    type: ipv4
    required: false
  - id: guest_v4_dns2
    label: "Secondary DNS server"
    description: "Secondary IPv4 DNS server for the guest."
    hint: "192.0.2.54"
    type: ipv4
    required: false
  - id: guest_net_dnssuffix
    label: "DNS suffix"
    description: "DNS search suffix for the guest network configuration."
    hint: "corp.example.com"
    type: string
    required: false
parameter_sets:
  - id: static_ipv4
    label: "Static IPv4 configuration"
    description: "Provide the required networking fields to request a static IPv4 assignment."
    variants:
      - id: static_ipv4_core
        label: "Static IPv4 without DNS servers"
        required:
          - guest_v4_ipaddr
          - guest_v4_cidrprefix
          - guest_v4_defaultgw
      - id: static_ipv4_with_dns
        label: "Static IPv4 with DNS servers"
        required:
          - guest_v4_ipaddr
          - guest_v4_cidrprefix
          - guest_v4_defaultgw
          - guest_v4_dns1
        optional:
          - guest_v4_dns2
