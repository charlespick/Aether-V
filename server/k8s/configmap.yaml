apiVersion: v1
kind: ConfigMap
metadata:
  name: aetherv-config
  namespace: aetherv
data:
  # Application
  # APP_NAME: "Aether-V Server"  # Default: Aether-V Server
  # DEBUG: "false"  # Default: false (enable for verbose logging)
  # ENVIRONMENT_NAME: "Production Environment"  # Default display name

  # Authentication
  # AUTH_ENABLED: "true"  # Default: true (leave enabled for production)
  # ALLOW_DEV_AUTH: "false"  # Default: false; must be true before disabling auth

  # OIDC
  OIDC_ISSUER_URL: "https://login.microsoftonline.com/<tenant-id>/v2.0"
  OIDC_CLIENT_ID: "<client-id>"
  OIDC_REDIRECT_URI: "https://aetherv.example.com/auth/callback"
  # OIDC_API_AUDIENCE: "api://<client-id>"  # Optional explicit API audience override
  # OIDC_ADMIN_PERMISSIONS: "Aether.Admin"  # Default: Aether.Admin (optional elevated scope)
  OIDC_READER_PERMISSIONS: "Aether.Reader"
  OIDC_WRITER_PERMISSIONS: "Aether.Writer"
  # OIDC_POST_LOGOUT_REDIRECT_URI: "https://aetherv.example.com/auth/logged-out"  # Optional page to receive users after IdP logout
  # OIDC_END_SESSION_ENDPOINT: "https://login.microsoftonline.com/<tenant-id>/oauth2/v2.0/logout"  # Optional explicit IdP logout endpoint
  # OIDC_ROLE_NAME: "vm-admin"  # Legacy fallback role mapping (optional)
  # OIDC_FORCE_HTTPS: "true"  # Default: true (set false only for local HTTP testing)

  # Security
  # JWKS_CACHE_TTL: "300"  # Default: 300 seconds
  # MAX_TOKEN_AGE: "3600"  # Default: 3600 seconds
  # SESSION_MAX_AGE: "3600"  # Default: 3600 seconds
  # COOKIE_SECURE: "true"  # Default: true
  # COOKIE_SAMESITE: "lax"  # Default: lax

  # Hyper-V hosts
  # HYPERV_HOSTS: "hyperv01.example.com,hyperv02.example.com"  # Default: (empty; provide hostnames to manage workloads)

  # WinRM Kerberos authentication
  WINRM_KERBEROS_PRINCIPAL: "svc-aetherv@AD.EXAMPLE.COM"  # Required: Service account UPN; if using an HTTP/ SPN ensure it maps to this account
  # WINRM_KERBEROS_REALM: "AD.EXAMPLE.COM"  # Optional: Kerberos realm override
  # WINRM_KERBEROS_KDC: "dc01.ad.example.com"  # Optional: KDC server override
  
  # WinRM connection settings
  # WINRM_PORT: "5985"  # Default: 5985
  # WINRM_OPERATION_TIMEOUT: "15.0"  # Default: 15.0 seconds for WinRM operations
  # WINRM_CONNECTION_TIMEOUT: "30.0"  # Default: 30.0 second network connect timeout
  # WINRM_READ_TIMEOUT: "30.0"  # Default: 30.0 second HTTP read timeout
  # WINRM_POLL_INTERVAL_SECONDS: "1.0"  # Default: 1.0 second polling cadence for runspace status

  # Inventory
  # INVENTORY_REFRESH_INTERVAL: "60"  # Default: 60 seconds

  # Concurrency control (static limits)
  # MAX_WINRM_CONNECTIONS: "48"  # Default: 48 maximum concurrent WinRM connections
  # IO_JOB_TIMEOUT_SECONDS: "900"  # Default: 15 minutes for IO-intensive jobs (disk creation, guest init)
  # SHORT_JOB_TIMEOUT_SECONDS: "60"  # Default: 60 seconds for short jobs (inventory, VM actions, CRUD)
  # SHORT_JOB_DISPATCH_INTERVAL_SECONDS: "1.0"  # Default: 1 second between short job dispatches

  # WebSockets
  # WEBSOCKET_TIMEOUT: "1800"  # Default: 1800 seconds
  # WEBSOCKET_PING_INTERVAL: "30"  # Default: 30 seconds
  # WEBSOCKET_REFRESH_TIME: "1500"  # Default: 1500 seconds

  # Deployment
  # HOST_INSTALL_DIRECTORY: "C:\\Program Files\\Aether-V"  # Default agent path
  # HOST_DEPLOYMENT_TIMEOUT: "60.0"  # Default: 60 seconds per host WinRM operation
  # AGENT_STARTUP_CONCURRENCY: "3"  # Default: 3 parallel host startups
  # AGENT_STARTUP_INGRESS_TIMEOUT: "120.0"  # Default: wait up to 120s for ingress readiness
  # AGENT_STARTUP_INGRESS_POLL_INTERVAL: "3.0"  # Default: poll ingress readiness every 3s
  # AGENT_DOWNLOAD_BASE_URL: "https://aetherv.example.com/agent"  # Required for automated host updates
  # AGENT_DOWNLOAD_MAX_ATTEMPTS: "5"  # Default: 5 download retries
  # AGENT_DOWNLOAD_RETRY_INTERVAL: "2.0"  # Default: 2 seconds between retries

  # Development
  # DUMMY_DATA: "false"  # Default: false (enables mock data when true)
