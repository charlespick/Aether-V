apiVersion: v1
kind: ConfigMap
metadata:
  name: aetherv-config
  namespace: aetherv
data:
  # Application
  # DEBUG: "false"  # Default: false (enable for verbose logging)
  # ENVIRONMENT_NAME: "Production Environment"  # Default display name

  # Authentication
  # AUTH_ENABLED: "true"  # Default: true (leave enabled for production)
  # ALLOW_DEV_AUTH: "false"  # Default: false; must be true before disabling auth

  # OIDC
  OIDC_ISSUER_URL: "https://login.microsoftonline.com/<tenant-id>/v2.0"
  OIDC_CLIENT_ID: "<client-id>"
  OIDC_REDIRECT_URI: "https://aetherv.example.com/auth/callback"
  # OIDC_ROLE_NAME: "vm-admin"  # Default: vm-admin (use "*" to allow any user)
  # OIDC_FORCE_HTTPS: "true"  # Default: true (set false only for local HTTP testing)

  # Security
  # JWKS_CACHE_TTL: "300"  # Default: 300 seconds
  # MAX_TOKEN_AGE: "3600"  # Default: 3600 seconds
  # SESSION_MAX_AGE: "3600"  # Default: 3600 seconds
  # COOKIE_SECURE: "true"  # Default: true
  # COOKIE_SAMESITE: "lax"  # Default: lax

  # Hyper-V hosts
  HYPERV_HOSTS: "hyperv01.example.com,hyperv02.example.com"

  # WinRM
  # WINRM_TRANSPORT: "ntlm"  # Default: ntlm (supports ntlm, basic, credssp)
  # WINRM_PORT: "5985"  # Default: 5985

  # Inventory
  # INVENTORY_REFRESH_INTERVAL: "60"  # Default: 60 seconds

  # Jobs
  # JOB_WORKER_CONCURRENCY: "3"  # Default: 3 concurrent provisioning jobs

  # WebSockets
  # WEBSOCKET_TIMEOUT: "1800"  # Default: 1800 seconds
  # WEBSOCKET_PING_INTERVAL: "30"  # Default: 30 seconds
  # WEBSOCKET_REFRESH_TIME: "1500"  # Default: 1500 seconds

  # Deployment
  # HOST_INSTALL_DIRECTORY: "C:\\Program Files\\Home Lab Virtual Machine Manager"  # Default agent path
  # AGENT_STARTUP_CONCURRENCY: "4"  # Default: 4 parallel host startups
  # AGENT_ARTIFACTS_PATH: "/app/agent"  # Default: embedded artifact path
  # AGENT_HTTP_MOUNT_PATH: "/agent"  # Default: HTTP mount point
  # AGENT_DOWNLOAD_BASE_URL: "https://aetherv.example.com/agent"  # Required for automated host updates
  # AGENT_DOWNLOAD_MAX_ATTEMPTS: "5"  # Default: 5 download retries
  # AGENT_DOWNLOAD_RETRY_INTERVAL: "2.0"  # Default: 2 seconds between retries

  # Development
  # DUMMY_DATA: "false"  # Default: false (enables mock data when true)
