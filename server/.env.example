# Aether-V Server Configuration Example
# Copy this file to .env and fill in your values

# Application
# Default: Aether-V Server
# APP_NAME=Aether-V Server
# Default: false (enable for verbose logging)
# DEBUG=false
# Default UI display name
# ENVIRONMENT_NAME=Production Environment

# Authentication
# Default: true (leave enabled for production)
# AUTH_ENABLED=true
# Default: false; must be true before disabling auth
# ALLOW_DEV_AUTH=false

# OIDC
OIDC_ISSUER_URL=https://login.microsoftonline.com/<tenant-id>/v2.0
OIDC_CLIENT_ID=<your-client-id>
OIDC_CLIENT_SECRET=<your-client-secret>
OIDC_REDIRECT_URI=https://aetherv.example.com/auth/callback
# Optional explicit IdP logout endpoint
# OIDC_END_SESSION_ENDPOINT=https://login.microsoftonline.com/<tenant-id>/oauth2/v2.0/logout
# Optional page to receive users after IdP logout
# OIDC_POST_LOGOUT_REDIRECT_URI=https://aetherv.example.com/auth/logged-out
# Optional explicit API audience
# OIDC_API_AUDIENCE=api://<your-client-id>
# Default: Aether.Admin (optional elevated scope)
# OIDC_ADMIN_PERMISSIONS=Aether.Admin
OIDC_READER_PERMISSIONS=Aether.Reader
OIDC_WRITER_PERMISSIONS=Aether.Writer
# Legacy fallback role mapping (optional)
# OIDC_ROLE_NAME=vm-admin
# Default: true; set false only for local HTTP testing
# OIDC_FORCE_HTTPS=true

# API & session
SESSION_SECRET_KEY=<your-secure-session-secret-key>

# Security
# Default: 300 seconds
# JWKS_CACHE_TTL=300
# Default: 3600 seconds
# MAX_TOKEN_AGE=3600
# Default: 3600 seconds
# SESSION_MAX_AGE=3600
# Default: true
# COOKIE_SECURE=true
# Default: lax
# COOKIE_SAMESITE=lax

# Hyper-V / WinRM
# Default: (empty; provide hostnames to manage workloads)
# HYPERV_HOSTS=hyperv01.example.com,hyperv02.example.com
# Use the service account UPN; if using an HTTP/ SPN ensure it maps to this account
# WINRM_KERBEROS_PRINCIPAL=svc-aetherv@AD.EXAMPLE.COM
# WINRM_KEYTAB_B64=<base64-encoded-keytab>
# Optional: Kerberos realm override
# WINRM_KERBEROS_REALM=AD.EXAMPLE.COM
# Optional: KDC server override
# WINRM_KERBEROS_KDC=dc01.ad.example.com
# Default: 5985
# WINRM_PORT=5985
# Default: 15.0 seconds for WinRM operations
# WINRM_OPERATION_TIMEOUT=15.0
# Default: 30.0 second network connect timeout
# WINRM_CONNECTION_TIMEOUT=30.0
# Default: 30.0 second HTTP read timeout
# WINRM_READ_TIMEOUT=30.0
# Default: 1.0 second polling cadence for runspace status
# WINRM_POLL_INTERVAL_SECONDS=1.0

# Inventory
# Default: 60 seconds
# INVENTORY_REFRESH_INTERVAL=60

# Concurrency control (static limits)
# Default: 48 maximum concurrent WinRM connections
# MAX_WINRM_CONNECTIONS=48
# Default: 15 minutes for IO-intensive jobs (disk creation, guest init)
# IO_JOB_TIMEOUT_SECONDS=900
# Default: 60 seconds for short jobs (inventory, VM actions, CRUD)
# SHORT_JOB_TIMEOUT_SECONDS=60
# Default: 1 second between short job dispatches
# SHORT_JOB_DISPATCH_INTERVAL_SECONDS=1.0

# WebSockets
# Default: 1800 seconds
# WEBSOCKET_TIMEOUT=1800
# Default: 30 seconds
# WEBSOCKET_PING_INTERVAL=30
# Default: 1500 seconds
# WEBSOCKET_REFRESH_TIME=1500

# Deployment
# Default agent path
# HOST_INSTALL_DIRECTORY=C:\\Program Files\\Aether-V
# Default: 60 seconds per host WinRM operation
# HOST_DEPLOYMENT_TIMEOUT=60.0
# Default: 3 parallel host startups
# AGENT_STARTUP_CONCURRENCY=3
# Default: wait up to 120s for ingress readiness
# AGENT_STARTUP_INGRESS_TIMEOUT=120.0
# Default: poll ingress readiness every 3s
# AGENT_STARTUP_INGRESS_POLL_INTERVAL=3.0
# Required for automated host updates
# AGENT_DOWNLOAD_BASE_URL=https://aetherv.example.com/agent
# Default: 5 download retries
# AGENT_DOWNLOAD_MAX_ATTEMPTS=5
# Default: 2 seconds between retries
# AGENT_DOWNLOAD_RETRY_INTERVAL=2.0

# Development
# Default: false (enables mock data when true)
# DUMMY_DATA=false
